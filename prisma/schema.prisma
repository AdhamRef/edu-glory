generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model University {
  id              String           @id @default(auto()) @map("_id") @db.ObjectId
  slug            String           @unique
  type            String           // "university" | "institute"
  universityType  String?          // "private" | "foreign" | "government" - only for type="university"
  name_en         String
  name_ar         String
  short_en        String?
  short_ar        String?
  content_en      String?
  content_ar      String?
  images          String[]
  videoUrl        String?
  specializations Specialization[]
  applications    Application[]
  createdAt       DateTime         @default(now())
  updatedAt       DateTime?        @updatedAt
  isPublished     Boolean          @default(true)
}

model Specialization {
  id           String        @id @default(auto()) @map("_id") @db.ObjectId
  universityId String        @db.ObjectId
  name_en      String
  name_ar      String
  duration     String
  tuition      String
  university   University    @relation(fields: [universityId], references: [id], onDelete: Cascade)
  applications Application[]
}

model Application {
  id               String          @id @default(auto()) @map("_id") @db.ObjectId
  universityId     String          @db.ObjectId
  specializationId String?         @db.ObjectId
  studentName      String
  email            String
  phone            String
  nationality      String
  residence        String
  createdAt        DateTime        @default(now())
  university       University      @relation(fields: [universityId], references: [id])
  specialization   Specialization? @relation(fields: [specializationId], references: [id])
}

model AdminUser {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  email          String   @unique
  hashedPassword String
  name           String?
  createdAt      DateTime @default(now())
}
